%!TEX root = ./Boostan-RepPres.tex
%!TEX TS-program = xelatex
\documentclass[12pt, openany]{report}

\ifx\MyPath\undefined
\newcommand{\MyPath}{}
\fi

%% =================================================================================
% تنظیمات اولیه و لود کردن قالب
\input{\MyPath src/Boostan-Init}

% *** تغییر ۱: کاهش حاشیه‌ها به ۱ سانتی‌متر برای فضای بیشتر ***
\usepackage[paperwidth=25.4cm, paperheight=14.29cm, top=1cm, bottom=1cm, left=1cm, right=1cm]{geometry}

\docStyle{Pres}
\titleStyle{presentation}
\depRe{none}
\input{\MyPath src/Boostan-Main}

%% ================================================================================
% *** تغییر ۲: اجبار به استفاده از فاصله خطوط فشرده (Single Spacing) ***
% این دستور حیاتی است تا متن‌ها در صفحه اسلاید پخش نشوند
\usepackage{setspace}
\singlespacing 
% یا اگر دستور بالا کار نکرد، از این استفاده می‌کنیم:
\linespread{1}

%% ================================================================================
% تنظیمات ظاهری و فونت‌ها
\sectionfont{\fontsize{21}{23}\selectfont}
\subsectionfont{\fontsize{19}{21}\selectfont}
\titlespacing\subsection{0pt}{12pt plus 4pt minus 2pt}{15pt plus 4pt minus 2pt}

\makeatletter
    \long\def\@makefntext#1{\parindent 1em\noindent
            \hb@xt@1.8em{%
                \hss\@textsuperscript{\huge\@thefnmark}}#1}%
\makeatother

\let\oldfootnote\footnote
    \renewcommand{\footnote}[1]{\oldfootnote{\large\sffamily\rl{#1}}}
\let\oldLTRfootnote\LTRfootnote
    \renewcommand{\LTRfootnote}[1]{\oldLTRfootnote{\large\sffamily#1}}

\newfontfamily\secTitFont[Scale=3]{B Kamran Outline}
\newcommand{\putSec}[2][]{%
  \clearpage
  \if\relax\detokenize{#1}\relax
    \addcontentsline{toc}{section}{#2}%
  \else
    \addcontentsline{toc}{section}{#1}%
  \fi
  \vspace*{\fill}%
  \begin{center}\secTitFont\color{Plum}#2\end{center}%
  \vspace*{\fill}%
}

\defpersianfont\titlefontr[Scale=1.7, AutoFakeBold=2.0]{IRNazanin}
\newcommand{\frametitle}[1]{
\begin{tikzpicture}[remember picture,overlay]
\node[fill=RoyalPurple!80,rounded corners=5mm,text=white, minimum height=1.5cm, minimum width={\paperwidth*0.99},fill=RoyalPurple!60] at ([yshift=-1cm]current page.north) {{\textbf{\rl{\titlefontr#1}}}};
\end{tikzpicture}\par\vspace{1cm}%
}

\newcommand*\circled[1]{\tikz[baseline]{\node[shape=circle,draw=none,inner sep=4pt, draw=RoyalPurple!80,fill=Plum!80,text=white] (char) {\Large #1};}}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[L]{\circled{\thepage}}
\fancyfootoffset{0.5cm}

\DeclareMathSizes{10}{18}{16}{15}   
\DeclareMathSizes{11}{16}{14}{13}   
\DeclareMathSizes{12}{18}{16}{15}  

\makeatletter
\bidi@appto{\LTRfoottextfont}{\Large}
\makeatother

% تعریف باکس رنگی (myblock)
\usepackage{tcolorbox}
\newtcolorbox{myblock}[1]{colback=RoyalPurple!5!white,colframe=RoyalPurple!75!black,title=\textbf{#1}, rounded corners}

\makeatletter
\renewcommand{\boxed}[2]{%
\tikz[baseline]\node [rectangle, minimum width=1ex,rounded corners=3mm,draw,fill=#1,draw=none,anchor=base] {$\displaystyle#2$};}
 \makeatother

\AtBeginDocument{\setlength\abovedisplayskip{4pt}}
\AtBeginDocument{\setlength\belowdisplayskip{4pt}}

% ===============================================================================
% شروع بدنه اصلی
% ===============================================================================

\begin{document}
    % اعمال مجدد تنظیمات فاصله خطوط در شروع سند
    \singlespacing

    % فراخوانی فایل‌ها
    \input{parts/part1}  % نفر اول
    \input{parts/part2}  % نفر دوم
    \input{parts/part3}  % نفر سوم

\end{document}